{"version":3,"sources":["components/Login/Login.module.css","components/UI/Card/Card.module.css","components/UI/Card/Card.js","components/Login/Login.js","components/Home/Home.js","App.js","index.js","components/Home/Home.module.css"],"names":["module","exports","Card","props","className","classes","card","children","Login","useState","isConnecting","setIsConnecting","window","ethereum","provider","setProvider","isMetaMaskInstalled","setIsMetaMaskInstalled","isMobileDevice","useEffect","detectProvider","console","error","web3","currentProvider","connectDeepLink","warn","onLoginHandler","request","method","onLogin","open","login","onClick","button","type","Home","home","currentAccount","currentNetwork","balance","btns","logout","clickLogoutBtn","App","isConnected","setIsConnected","setCurrentAccount","setBalance","chainId","setChainId","setWeb3","NETWORKS","Web3","eth","getAccounts","accounts","getChainId","utils","getBalance","accBalanceEth","fromWei","length","log","Number","toFixed","handleAccountsChanged","web3Accounts","handleChainChanged","web3ChainId","on","changeWallet","params","requiredMethods","then","permissions","catch","getCurrentNetwork","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.f80917c0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__1vDL5\",\"button\":\"Login_button__1Binv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__Gobze\"};","import classes from \"./Card.module.css\";\r\n\r\nconst Card = (props) => {\r\n    return (\r\n        <div className={`${classes.card} ${props.className}`}>{props.children}</div>\r\n    );\r\n};\r\n\r\nexport default Card;","import classes from \"./Login.module.css\";\r\nimport Card from \"../UI/Card/Card\";\r\nimport {useEffect, useState} from \"react\";\r\n\r\nconst Login = (props) => {\r\n\r\n    const [isConnecting, setIsConnecting] = useState(false);\r\n    const [provider, setProvider] = useState(window.ethereum);\r\n    const [isMetaMaskInstalled, setIsMetaMaskInstalled] = useState(false);\r\n    // const [isMetaMaskConnected, setIsMetaMaskConnected] = useState(false);\r\n\r\n    const isMobileDevice = () => {\r\n        return 'ontouchstart' in window || 'onmsgesturechange' in window;\r\n    };\r\n\r\n    useEffect(() => {\r\n        setProvider(detectProvider());\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (provider) {\r\n            if (provider !== window.ethereum) {\r\n                console.error(\"Not window.ethereum provider. Do you have multiple wallets installed?\");\r\n            }\r\n            setIsMetaMaskInstalled(true);\r\n        }\r\n    }, [provider]);\r\n\r\n\r\n\r\n    const detectProvider = () => {\r\n        let provider;\r\n        if (window.ethereum) {\r\n            provider = window.ethereum;\r\n            // console.log(provider);\r\n            // setIsMetaMaskConnected(true);\r\n        } else if (window.web3) {\r\n            provider = window.web3.currentProvider;\r\n            // setIsMetaMaskConnected(true);\r\n        } else if (isMobileDevice()) {\r\n            connectDeepLink();\r\n        } else {\r\n            console.warn(\"No Ethereum browser detected! Check out MetaMask\");\r\n        }\r\n\r\n        return provider;\r\n    };\r\n\r\n    const onLoginHandler = async () => {\r\n        if(isMobileDevice()){\r\n            connectDeepLink();\r\n        } else {\r\n            setIsConnecting(true);\r\n            await provider.request({\r\n                method: \"eth_requestAccounts\",\r\n            });\r\n            setIsConnecting(false);\r\n            props.onLogin(provider);\r\n        }\r\n\r\n    };\r\n\r\n    const connectDeepLink = () => {\r\n        const dappUrl = \"18.207.114.82\"; // TODO enter your dapp URL. For example: https://uniswap.exchange. (don't enter the \"https://\")\r\n        const metamaskAppDeepLink = \"https://metamask.app.link/dapp/\" + dappUrl;\r\n\r\n        return window.open(metamaskAppDeepLink);\r\n    }\r\n\r\n\r\n    return (\r\n        <Card className={classes.login}>\r\n            {isMetaMaskInstalled &&\r\n                <button onClick={onLoginHandler} className={classes.button} type={\"button\"}>\r\n                    {!isConnecting && \"Connect\"}\r\n                    {isConnecting && \"Loading...\"}\r\n                </button>}\r\n            {/*\r\n            {!isMetaMaskInstalled &&\r\n                <p>\r\n                    <a href={\"https://metamask.io/download/\"}>Install MetaMask</a>\r\n                </p>\r\n            }*/}\r\n            {/*{!isMetaMaskInstalled &&\r\n                <button onClick={connectDeepLink} className={classes.button} type={\"button\"}>\r\n                    Install\r\n                </button>\r\n            }*/}\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default Login;\r\n","import classes from \"./Home.module.css\";\r\nimport Card from \"../UI/Card/Card\";\r\n\r\nconst Home = (props) => {\r\n    return (\r\n        <>\r\n            <Card className={classes.home}>\r\n                <h1>Welcome</h1>\r\n                <p>Wallet Address : {props.currentAccount}</p>\r\n                <p>Current Network : {props.currentNetwork}</p>\r\n                <p>Balance : {props.balance}</p>\r\n            </Card>\r\n            <div className={classes.btns}>\r\n                <button className={classes.logout} onClick={props.clickLogoutBtn}>Logout</button>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home;\r\n","import Login from \"./components/Login/Login\";\nimport Home from \"./components/Home/Home\";\nimport {useState, useEffect} from \"react\";\nimport Web3 from \"web3\";\n\nfunction App() {\n    const [isConnected, setIsConnected] = useState(false);\n    const [currentAccount, setCurrentAccount] = useState(null);\n    const [balance, setBalance] = useState(0);\n    const [provider, setProvider] = useState(window.ethereum);\n    const [chainId, setChainId] = useState(null);\n    const [web3, setWeb3] = useState(null);\n\n\n    const NETWORKS = {\n        1: \"Ethereum Main Network\",\n        3: \"Ropsten Test Network\",\n        4: \"Rinkeby Test Network\",\n        5: \"Goerli Test Network\",\n        42: \"Kovan Test Network\",\n    };\n\n    const onLogin = async (provider) => {\n        const web3 = new Web3(provider);\n        const accounts = await web3.eth.getAccounts();\n        const chainId = await web3.eth.getChainId();\n        const accBalanceEth = web3.utils.fromWei(\n            await web3.eth.getBalance(accounts[0]), \"ether\"\n        );\n\n        if (accounts.length === 0) {\n            console.log(\"Please connect to MataMask!\");\n        } else if (accounts[0] !== currentAccount) {\n            setProvider(provider);\n            setWeb3(web3);\n            setChainId(chainId);\n            setCurrentAccount(accounts[0]);\n            setIsConnected(true);\n            setBalance(Number(accBalanceEth).toFixed(10));\n        }\n    };\n\n\n    useEffect(() => {\n\n        const handleAccountsChanged = async (accounts) => {\n            // const web3Accounts = await web3.eth.getAccounts();\n            const accBalanceEth = web3.utils.fromWei(\n                await web3.eth.getBalance(accounts[0]), \"ether\"\n            );\n            if (accounts.length === 0) {\n                // onLogout();\n                await logout();\n            } else if (accounts[0] !== currentAccount) {\n                const web3Accounts = await web3.eth.getAccounts();\n                setCurrentAccount(web3Accounts);\n                setBalance(Number(accBalanceEth).toFixed(10));\n            }\n        };\n\n        const handleChainChanged = async (chainId) => {\n            const web3ChainId = await web3.eth.getChainId();\n            setChainId(web3ChainId);\n\n            // We recommend reloading the page, unless you must do otherwise\n            // window.location.reload();\n        };\n\n        /*const handleNewAccounts = async (accounts) => {\n            const web3Accounts = await web3.eth.getAccounts();\n            setCurrentAccount(web3Accounts);\n        };*/\n\n\n        if (isConnected) {\n            // provider.on(\"isConnected\", onLogin);\n            provider.on(\"accountsChanged\", handleAccountsChanged);\n            provider.on(\"chainChanged\", handleChainChanged);\n            // provider.on('accountsChanged', handleNewAccounts)\n        }\n    }, [isConnected]);\n\n/*    const onLogout = () => {\n        setIsConnected(false);\n        setCurrentAccount(null);\n    };*/\n\n    const getCurrentNetwork = (chainId) => {\n        return NETWORKS[chainId];\n    };\n\n    const logout = async () => {\n        /*provider.on(\"disconnect\", (code, reason) => {\n            console.log(code, reason);\n        });*/\n/*        const permissions = await window.ethereum.request({\n            method: 'wallet_requestPermissions',\n            params: [{\n                eth_accounts: {},\n            }]\n        });*/\n\n        // ethereum.on('disconnect', handler: (error: ProviderRpcError) => void);\n        setIsConnected(false);\n        setCurrentAccount(null);\n        setBalance(0);\n        setProvider(null);\n        setChainId(null);\n        setWeb3(null);\n    };\n\n    const changeWallet = async () => {\n        provider.request({\n            method: 'wallet_requestPermissions',\n            params: [\n                {\n                    'eth_accounts': {\n                        requiredMethods: ['signTypedData_v4']\n                    }\n                }\n            ]\n        })\n            .then((permissions) => {\n                console.log(permissions);\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    };\n\n\n    return (\n        <div>\n            <header className={\"main-header\"}>\n                <h1>AIxCON</h1>\n                <nav className={\"nav\"}>\n                    <ul>\n                        <li>\n                            {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n                            <a onClick={changeWallet}>{currentAccount}</a>\n                        </li>\n                    </ul>\n                </nav>\n            </header>\n            <main>\n                {!isConnected && <Login onLogin={onLogin}/>}\n                {isConnected &&\n                    <Home\n                        currentAccount={currentAccount}\n                        currentNetwork={getCurrentNetwork(chainId)}\n                        balance={balance}\n                        clickLogoutBtn={logout}\n                    />\n                }\n            </main>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__21WEm\",\"btns\":\"Home_btns__q8LfX\",\"logout\":\"Home_logout__3OV6U\"};"],"sourceRoot":""}