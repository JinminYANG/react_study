{"version":3,"sources":["components/Login/Login.module.css","components/UI/Card/Card.module.css","components/UI/Card/Card.js","components/Login/Login.js","components/Home/Home.js","App.js","index.js","components/Home/Home.module.css"],"names":["module","exports","Card","props","className","classes","card","children","Login","useState","isConnecting","setIsConnecting","window","ethereum","provider","setProvider","useEffect","connectDeepLink","detectProvider","alert","web3","currentProvider","onLoginHandler","request","method","onLogin","open","login","onClick","button","type","Home","home","currentAccount","currentNetwork","balance","btns","logout","clickLogoutBtn","App","isConnected","setIsConnected","setCurrentAccount","setBalance","chainId","setChainId","setWeb3","NETWORKS","Web3","eth","getAccounts","accounts","getChainId","utils","getBalance","accBalanceEth","fromWei","length","Number","toFixed","handleAccountsChanged","web3Accounts","handleChainChanged","web3ChainId","on","changeWallet","params","requiredMethods","then","permissions","console","log","catch","error","getCurrentNetwork","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.78a4361d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__1vDL5\",\"button\":\"Login_button__1Binv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__Gobze\"};","import classes from \"./Card.module.css\";\r\n\r\nconst Card = (props) => {\r\n    return (\r\n        <div className={`${classes.card} ${props.className}`}>{props.children}</div>\r\n    );\r\n};\r\n\r\nexport default Card;","import classes from \"./Login.module.css\";\r\nimport Card from \"../UI/Card/Card\";\r\nimport {useEffect, useState} from \"react\";\r\n\r\nconst Login = (props) => {\r\n\r\n    const [isConnecting, setIsConnecting] = useState(false);\r\n    const [provider, setProvider] = useState(window.ethereum);\r\n\r\n    const isMobileDevice = () => {\r\n        return 'ontouchstart' in window || 'onmsgesturechange' in window;\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isMobileDevice()) {\r\n            connectDeepLink();\r\n        } else {\r\n            setProvider(detectProvider());\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (provider) {\r\n            if (provider !== window.ethereum) {\r\n                alert(\"Not window.ethereum provider. Do you have multiple wallets installed?\");\r\n            }\r\n        }\r\n    }, [provider]);\r\n\r\n\r\n    const detectProvider = () => {\r\n        let provider;\r\n        if (window.ethereum) {\r\n            provider = window.ethereum;\r\n        } else if (window.web3) {\r\n            provider = window.web3.currentProvider;\r\n        } else {\r\n            alert(\"No Ethereum browser detected! Check out MetaMask\");\r\n        }\r\n\r\n        return provider;\r\n    };\r\n\r\n    const onLoginHandler = async () => {\r\n        setIsConnecting(true);\r\n        await provider.request({\r\n            method: \"eth_requestAccounts\",\r\n        });\r\n        setIsConnecting(false);\r\n        props.onLogin(provider);\r\n    };\r\n\r\n    const connectDeepLink = () => {\r\n        const dappUrl = \"jinminyang.github.io/metamask-v2\"; // TODO enter your dapp URL. For example: https://uniswap.exchange. (don't enter the \"https://\")\r\n        const metamaskAppDeepLink = \"https://metamask.app.link/dapp/\" + dappUrl;\r\n\r\n        return window.open(metamaskAppDeepLink);\r\n    }\r\n\r\n\r\n    return (\r\n        <Card className={classes.login}>\r\n            <button onClick={onLoginHandler} className={classes.button} type={\"button\"}>\r\n                {!isConnecting && \"Connect\"}\r\n                {isConnecting && \"Loading...\"}\r\n            </button>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default Login;\r\n","import classes from \"./Home.module.css\";\r\nimport Card from \"../UI/Card/Card\";\r\n\r\nconst Home = (props) => {\r\n    return (\r\n        <>\r\n            <Card className={classes.home}>\r\n                <h1>Welcome</h1>\r\n                <p>Wallet Address : {props.currentAccount}</p>\r\n                <p>Current Network : {props.currentNetwork}</p>\r\n                <p>Balance : {props.balance}</p>\r\n            </Card>\r\n            <div className={classes.btns}>\r\n                <button className={classes.logout} onClick={props.clickLogoutBtn}>Logout</button>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home;\r\n","import Login from \"./components/Login/Login\";\nimport Home from \"./components/Home/Home\";\nimport {useState, useEffect} from \"react\";\nimport Web3 from \"web3\";\n\nfunction App() {\n    const [isConnected, setIsConnected] = useState(false);\n    const [currentAccount, setCurrentAccount] = useState(null);\n    const [balance, setBalance] = useState(0);\n    const [provider, setProvider] = useState(window.ethereum);\n    const [chainId, setChainId] = useState(null);\n    const [web3, setWeb3] = useState(null);\n\n\n    const NETWORKS = {\n        1: \"Ethereum Main Network\",\n        3: \"Ropsten Test Network\",\n        4: \"Rinkeby Test Network\",\n        5: \"Goerli Test Network\",\n        42: \"Kovan Test Network\",\n    };\n\n    const onLogin = async (provider) => {\n        const web3 = new Web3(provider);\n        const accounts = await web3.eth.getAccounts();\n        const chainId = await web3.eth.getChainId();\n        const accBalanceEth = web3.utils.fromWei(\n            await web3.eth.getBalance(accounts[0]), \"ether\"\n        );\n\n        if (accounts.length === 0) {\n            alert(\"Please connect to MataMask!\");\n        } else if (accounts[0] !== currentAccount) {\n            setProvider(provider);\n            setWeb3(web3);\n            setChainId(chainId);\n            setCurrentAccount(accounts[0]);\n            setIsConnected(true);\n            setBalance(Number(accBalanceEth).toFixed(10));\n        }\n    };\n\n\n    useEffect(() => {\n\n        const handleAccountsChanged = async (accounts) => {\n            // const web3Accounts = await web3.eth.getAccounts();\n            const accBalanceEth = web3.utils.fromWei(\n                await web3.eth.getBalance(accounts[0]), \"ether\"\n            );\n            if (accounts.length === 0) {\n                // onLogout();\n                await logout();\n            } else if (accounts[0] !== currentAccount) {\n                const web3Accounts = await web3.eth.getAccounts();\n                setCurrentAccount(web3Accounts);\n                setBalance(Number(accBalanceEth).toFixed(10));\n            }\n        };\n\n        const handleChainChanged = async (chainId) => {\n            const web3ChainId = await web3.eth.getChainId();\n            setChainId(web3ChainId);\n\n            // We recommend reloading the page, unless you must do otherwise\n            // window.location.reload();\n        };\n\n        /*const handleNewAccounts = async (accounts) => {\n            const web3Accounts = await web3.eth.getAccounts();\n            setCurrentAccount(web3Accounts);\n        };*/\n\n\n        if (isConnected) {\n            // provider.on(\"isConnected\", onLogin);\n            provider.on(\"accountsChanged\", handleAccountsChanged);\n            provider.on(\"chainChanged\", handleChainChanged);\n            // provider.on('accountsChanged', handleNewAccounts)\n        }\n    }, [isConnected]);\n\n/*    const onLogout = () => {\n        setIsConnected(false);\n        setCurrentAccount(null);\n    };*/\n\n    const getCurrentNetwork = (chainId) => {\n        return NETWORKS[chainId];\n    };\n\n    const logout = async () => {\n        /*provider.on(\"disconnect\", (code, reason) => {\n            console.log(code, reason);\n        });*/\n/*        const permissions = await window.ethereum.request({\n            method: 'wallet_requestPermissions',\n            params: [{\n                eth_accounts: {},\n            }]\n        });*/\n\n        // ethereum.on('disconnect', handler: (error: ProviderRpcError) => void);\n        setIsConnected(false);\n        setCurrentAccount(null);\n        setBalance(0);\n        setProvider(null);\n        setChainId(null);\n        setWeb3(null);\n    };\n\n    const changeWallet = async () => {\n        provider.request({\n            method: 'wallet_requestPermissions',\n            params: [\n                {\n                    'eth_accounts': {\n                        requiredMethods: ['signTypedData_v4']\n                    }\n                }\n            ]\n        })\n            .then((permissions) => {\n                console.log(permissions);\n            })\n            .catch((error) => {\n                console.error(error);\n            });\n    };\n\n\n    return (\n        <div>\n            <header className={\"main-header\"}>\n                <h1>AIxCON</h1>\n                <nav className={\"nav\"}>\n                    <ul>\n                        <li>\n                            {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n                            <a onClick={changeWallet}>{currentAccount}</a>\n                        </li>\n                    </ul>\n                </nav>\n            </header>\n            <main>\n                {!isConnected && <Login onLogin={onLogin}/>}\n                {isConnected &&\n                    <Home\n                        currentAccount={currentAccount}\n                        currentNetwork={getCurrentNetwork(chainId)}\n                        balance={balance}\n                        clickLogoutBtn={logout}\n                    />\n                }\n            </main>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__21WEm\",\"btns\":\"Home_btns__q8LfX\",\"logout\":\"Home_logout__3OV6U\"};"],"sourceRoot":""}